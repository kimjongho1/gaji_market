# Gaji_Market (ê°€ì§€ë§ˆì¼“) 

<details>
<summary>ëª©ì°¨</summary>



1. [ê¸°ê°„](#í”„ë¡œì íŠ¸-ê¸°ê°„)
2. [ë…¸ì…˜](#ê°€ì§€ë§ˆì¼“-ë…¸ì…˜-êµ¬ê²½í•˜ê¸°click)
3. [íŒ€ì›](#-íŒ€-í”„ë¡œì íŠ¸)
4. [ê°œë°œí™˜ê²½](#ê°œë°œí™˜ê²½)
5. [ERD](#erd-cloud-êµ¬ê²½í•˜ëŸ¬-ê°€ê¸°)
6. [UML](#umlìœ ìŠ¤ì¼€ì´ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨usecase-diagram)
7. [í˜ì´ì§€](#í˜ì´ì§€)
- [ë©”ì¸,ìƒí’ˆ í˜ì´ì§€ ](#ë©”ì¸-í˜ì´ì§€-ìƒí’ˆ-ë¦¬ìŠ¤íŠ¸-í˜ì´ì§€)
	- [ë©”ì¸í˜ì´ì§€](#ë©”ì¸-í˜ì´ì§€)
    - [ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€](#ìƒí’ˆ-ë¦¬ìŠ¤íŠ¸-í˜ì´ì§€)
- [ë§ˆì´í˜ì´ì§€](#ë§ˆì´í˜ì´ì§€---êµ¬ë§¤ë‚´ì—­-íŒë§¤ë‚´ì—­-íŒë§¤ê¸€-ì°œëª©ë¡-ëª¨ì•„ë³´ê¸°-ìœ ì €ìƒí’ˆ)
	- [êµ¬ë§¤,íŒë§¤ ë‚´ì—­](#êµ¬ë§¤-íŒë§¤ë‚´ì—­)
	- [íŒë§¤ê¸€](#íŒë§¤ê¸€)
	- [ì¦ê²¨ì°¾ê¸°](#ì¦ê²¨ì°¾ê¸°)
	- [ìƒí’ˆ ë”ë³´ê¸°](#ìƒí’ˆ-ë”ë³´ê¸°)
- [ê²°ì œ](#ê²°ì œ-í˜ì´ì§€-ì£¼ì†Œ-ë³€ê²½-ê²°ì œ-ì§„í–‰-ë¦¬ë·°ì‘ì„±-ì¶”ê°€-ê¸°ëŠ¥-ajax-êµ¬í˜„)
	- [ì£¼ì†Œ ë³€ê²½](#ì£¼ì†Œ-ë³€ê²½)
	- [ê²°ì œ ì§„í–‰](#ê²°ì œ-ì§„í–‰)
	- [ë¦¬ë·° ì‘ì„±](#ë¦¬ë·°-ì‘ì„±)
- [ì•Œë¦¼](#ì•Œë¦¼-ê¸°ëŠ¥)
	
8. [ê¸°ëŠ¥êµ¬í˜„](#-í”„ë¡œì íŠ¸-ê¸°ëŠ¥êµ¬í˜„)
9. [ì£¼ìš”ê¸°ëŠ¥](#-ì£¼ìš”ê¸°ëŠ¥)

</details>

<br>

## í”„ë¡œì íŠ¸ ê¸°ê°„
### 2023.08.22~2023.09.18 (í”„ë¡œì íŠ¸ ì„¤ê³„) 
### 2023.09.19~2023.10.26 (í”„ë¡œì íŠ¸ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸)
### 2023.10.27~2023.10.30 (ë°œí‘œ ìë£Œ ë° ë°œí‘œì¤€ë¹„)

<br><br>

## [ê°€ì§€ë§ˆì¼“ ë…¸ì…˜ êµ¬ê²½í•˜ê¸°(Click)](https://brave-hall-1f1.notion.site/98ac7c797b4443bb924189bb4d820d05?pvs=4)
<br><br>

## ğŸ“£ íŒ€ í”„ë¡œì íŠ¸
- íŒ€ì¥ : ê¹€ì¢…í˜¸
- íŒ€ì› : ì²œì˜ì¤€, ì‹ ì •í›ˆ, ë°±ì˜í—Œ 

<br><br><br>


## ê°œë°œí™˜ê²½
|Category|Detail|
|--------|------|
|FrontEnd|HTML5, CSS, JavaScript, JQuery|
|BackEnd|Java(JDK 11.0.2), Spring Framework(5.3.19)|
|OS|Windows 10, MacOS|
|IDE|SpringToolSuite3, VSCode ,SQL Developer, DBeaver|
|Server|Tomcat 9.0|
|DateBase|Oracle(21c)|
|API|IamPort, CK Editor, Kakao Map, cloudinary, ipstack, Kakao(Daum) PostCode, Gmail SMPT|
|Library|AspectJ 1.9.19<br>ojdbc8 23.2.0.0<br>commons-lang3 3.8.1<br>slf4j 1.6.6<br>mybatis 3.5.9<br>spring-session 2.3.3.RELEASE<br>log4j 1.2.15<br>mybatis-spring 2.0.6<br>inject 1.0.0<br>lombok 1.18.28<br>Servlet API 4.0.1<br>spring-security 5.7.5<br>jackson 2.14.2<br>JSP API2.1<br>gson2.8.9<br>JSTL1.2<br>DBCP1.4<br>jackson2.10.2<br>iamport0.2.14<br>commons-fileupload 1.4<br>commons-io 2.6<br>cloudinary-http44 1.32.2<br>cloudinary-taglib 1.32.2<br>dotenv-java 2.2.4<br>javax.mail 1.4.7<br>spring-context-support 5.3.19|

#
## [ERD Cloud êµ¬ê²½í•˜ëŸ¬ ê°€ê¸°](https://www.erdcloud.com/d/Lm5qwJ8DbtZ92bk3R)
#### ERD ë‹´ë‹¹ì- `ë°±ì˜í—Œ`

![](https://github.com/bellho/gaji_market/assets/135290607/67e87eab-1541-4db1-add1-3dfa03ff6d87)

## [UML]ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨(Usecase Diagram)


<br>

# í˜ì´ì§€


## ë©”ì¸ í˜ì´ì§€, ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€
#### í™”ë©´êµ¬í˜„- `ì‹ ì •í›ˆ`, ê¸°ëŠ¥êµ¬í˜„- `ë°±ì˜í—Œ`

### ë©”ì¸ í˜ì´ì§€ 
<img src="https://github.com/bellho/gaji_market/assets/135290607/36b400fe-e7c8-49ef-921d-73d97ce22d9e">
<br><br>

### ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ 
<img src="https://github.com/bellho/gaji_market/assets/135290607/bb9a295a-d2b6-4bb6-b02b-d99819c6884f">

<details>
  <summary> ê²€ìƒ‰ ì¡°ê±´ì— ë”°ë¥¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•œ ë™ì  ì¿¼ë¦¬ë¬¸(Click) </summary>
  <br>
  ë™ì  ì¿¼ë¦¬ë¬¸ì„ í†µí•´ ì—¬ëŸ¬ê°€ì§€ ì…ë ¥ ê°€ëŠ¥í•œ ì •ë ¬ ì¡°ê±´ì¤‘ ì…ë ¥ëœ ê°’ì— ëŒ€í•´ì„œë§Œ whereì ˆì´ ì ìš© ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
  
  <br>

    <select id="getGoodsList" parameterType="map"	
		resultType="GoodsListDto">
		select list2.*,(select f.url from goods_file f where
		f.goods_id=list2.goods_id and rownum between 0 and 1) url from
		(select
		list.*,rownum rn from(
		(select
		g.view_count,g.title,g.price,g.goods_Id,u.nickname,g.status,g.safe_Trading_Yn,d.dong_Name,g.refreshed_at,
		g.created_at,

		(select count(*) from wishList w where
		g.goods_id=w.goods_id) likeCount
		from goods g join users u
		using(user_id) join dong d on g.dong_id=d.dong_id
		where
		active_status='Y'
		<if test='category!=null'>
			and category_id=#{category}
		</if>
		<if test='searchWord!=null'>
			and title like #{searchWord}
		</if>
		<choose>
			<when test="priceCeiling==100000">
				and price &lt;= 100000
			</when>
			<when test="priceCeiling==300000">
				and price &gt;= 100000 and price &lt;= 300000
			</when>
			<when test="priceCeiling==500000">
				and price &gt;= 300000 and price &lt;= 500000
			</when>
			<when test="priceCeiling==700000">
				and price &gt;= 500000
			</when>
		</choose>
				<choose>
		<when test='onsale!=null'>
			and g.status=1
		</when>
		<otherwise>
			and g.status!=4
		</otherwise>
		</choose>
		<if test='dongId!=null'>
			and g.dong_id=#{dongId}
		</if>
		<choose>
			<when test="sort==1">
				order by likeCount desc, g.refreshed_at desc
			</when>
			<when test="sort==3">
				order by price asc, g.refreshed_at desc
			</when>
			<when test="sort==4">
				order by price desc, g.refreshed_at desc
			</when>
			<otherwise>
				order by g.refreshed_at desc
			</otherwise>
		</choose>
		)
		list)
		)list2 where list2.rn between #{startRownum} and #{endRownum}
	</select>

</details>
<br>

<details>
  <summary>ì¡°ê±´ ê²€ìƒ‰ JSP ë¡œì§(Click)</summary>
	
	ì´ì „ì— ì ìš©í•œ ì¡°ê±´ë“¤ì´ ìœ ì§€ë˜ë©´ì„œ, ìƒˆë¡œìš´ ì¡°ê±´ë“¤ì„ ì¶”ê°€í•´ ë‚˜ê°€ê¸° ìœ„í•´
	í•˜ë‚˜ì˜ form íƒœê·¸ ì•ˆì— ë¯¸ë¦¬ input íƒœê·¸ë¥¼ ì¤€ë¹„í•´ ë†“ì€ í›„ ìƒˆë¡œìš´ ê°’ì´ ì¶”ê°€ ë  ë•Œë§ˆë‹¤
	inputíƒœê·¸ì— ê°’ì„ ì¶”ê°€í•´ submit í•˜ê³ . 
	Controllerì—ì„œë¶€í„° JSPë¡œëŠ” ì´ì „ì— ì ìš© ëœ ì¡°ê±´ê°’ë“¤ì„ ë‹¤ì‹œ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.
 
 </details>

#
## ë§ˆì´í˜ì´ì§€ - êµ¬ë§¤ë‚´ì—­, íŒë§¤ë‚´ì—­, íŒë§¤ê¸€, ì°œëª©ë¡, ëª¨ì•„ë³´ê¸°, ìœ ì €ìƒí’ˆ
#### í™”ë©´êµ¬í˜„- `ì‹ ì •í›ˆ, ë°±ì˜í—Œ`, ê¸°ëŠ¥êµ¬í˜„- `ë°±ì˜í—Œ`

<details>

### êµ¬ë§¤, íŒë§¤ë‚´ì—­ 
<summary>êµ¬ë§¤, íŒë§¤ë‚´ì—­ í˜ì´ì§€(Click)</summary> 
	<êµ¬ë§¤ë‚´ì—­>
	<br>
	<img src="https://github.com/bellho/gaji_market/assets/135290607/d79c28d2-ec15-4cfa-9a24-47acd01386b4"><br><br>
     <íŒë§¤ë‚´ì—­-íŒë§¤ì ì•„ì´ë””ë¡œ ì ‘ì†í›„ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.><br>
	<img src="https://github.com/bellho/gaji_market/assets/135290607/d5dd7f26-399c-4be9-bf60-4754e2f6e737">
</details>
<details>

### íŒë§¤ê¸€
  <summary>íŒë§¤ê¸€(Click)</summary>
	<img src="https://github.com/bellho/gaji_market/assets/135290607/4d7b155b-9820-49b8-9fb4-ddb12c1bdee4">
</details>

<details>

### ì¦ê²¨ì°¾ê¸° 
  <summary>ì¦ê²¨ì°¾ê¸° ìœ ì € í˜ì´ì§€(ëª¨ì•„ë³´ê¸°), ì°œ í˜ì´ì§€(Click)</summary>
	<img src="https://github.com/bellho/gaji_market/assets/135290607/4ff71d5d-4258-442c-b4d0-49d0a96f64dc">
</details>
<details>

### ìƒí’ˆ ë”ë³´ê¸°
  <summary>íŠ¹ì •ìœ ì € ìƒí’ˆ ë”ë³´ê¸°(Click)</summary>
	<img src="https://github.com/bellho/gaji_market/assets/135290607/ee3f10b5-5ab1-489b-9d99-1ac76910a912">
</details>

#
## ê²°ì œ í˜ì´ì§€ ì£¼ì†Œ ë³€ê²½, ê²°ì œ ì§„í–‰, ë¦¬ë·°ì‘ì„± (ì¶”ê°€ ê¸°ëŠ¥ ajax êµ¬í˜„)
#### í™”ë©´êµ¬í˜„ - `ì‹ ì •í›ˆ, ë°±ì˜í—Œ` ê¸°ëŠ¥êµ¬í˜„- `ë°±ì˜í—Œ`  

### ì£¼ì†Œ ë³€ê²½
<img src="https://github.com/bellho/gaji_market/assets/135290607/13c3a2fb-9cbc-41a0-a2bd-5c786c461385">
<details>
<br>
  <summary>ì£¼ì†Œ ë³€ê²½, ì‚­ì œ, ì¶”ê°€ë¥¼ ìœ„í•œ Mapperì½”ë“œ(Click)</summary>
      <ì•Œê³ ë¦¬ì¦˜ ì„¤ëª…><br>
    &nbsp;&nbsp;&nbsp; 1. ì£¼ì†Œìˆœì„œ 1ë²ˆì„ ëŒ€í‘œì£¼ì†Œë¡œ ë³¸ë‹¤.<br>
    &nbsp;&nbsp;&nbsp; 2. ëŒ€í‘œì£¼ì†Œ ë³€ê²½ì‹œ ëª¨ë“  ì£¼ì†Œìˆœì„œë¥¼ +1 í•œë‹¤.<br>
    &nbsp;&nbsp;&nbsp; 3. ëŒ€í‘œì£¼ì†Œë¡œ ì„¤ì •í•  ì£¼ì†Œì˜ ì£¼ì†Œìˆœì„œë¥¼ 1ë¡œ ì„¤ì •í•œë‹¤.<br>
    &nbsp;&nbsp;&nbsp; 4. ë§ˆì§€ë§‰ìœ¼ë¡œ ëŒ€í‘œì£¼ì†Œë¡œ ë³€ê²½í•œ ì£¼ì†Œì˜ ì£¼ì†Œìˆœì„œë³´ë‹¤ í° ì£¼ì†Œì— ëŒ€í•´ì„œ -1ì„ ì ìš©í•œë‹¤.
    <br><br>

>    

    <!-------------------------------------------ëŒ€í‘œì£¼ì†Œ ë³€ê²½ì„ ìœ„í•œ mapper--------------------------------------->
     <!-- ëŒ€í‘œì£¼ì†Œë¥¼ ë³€ê²½í•˜ê¸°ìœ„í•´ ì£¼ì†Œìˆœì„œë¥¼ í•˜ë‚˜ì”© ë’¤ë¡œ ë¯¼ë‹¤ -->
    <update id="updateMainAddressNo" parameterType="string">	
		update user_address set address_no=address_no+1 where user_id=#{userId}
	</update>
	
	<update id="updateMainAddress" parameterType="map">	<!--ì£¼ì†Œìˆœì„œë¥¼ 1ë¡œ ë°”ê¿ˆìœ¼ë¡œì¨ ëŒ€í‘œì£¼ì†Œ ë³€ê²½ -->
		update user_address set address_no=1 where user_id=#{userId} and address_no=#{addressNo}+1
	</update>
	
	<update id="updateMainAddress2" parameterType="map"> <!-- ëŒ€í‘œì£¼ì†Œê°€ ëœ ì£¼ì†Œë³´ë‹¤ ë†’ì€ìˆœì„œë“¤ì„ ë‹¤ì‹œ 1ì”© ë‚´ë ¤ì£¼ê¸°. -->
		update user_address set address_no=address_no-1 where user_id=#{userId} and address_no &gt; #{addressNo}
	</update>

    <!------------------------------------------------ì£¼ì†Œ ì¶”ê°€ mapper -------------------------------------------->
	<!-- ìƒˆë¡œì…ë ¥ëœ ì£¼ì†Œë¥¼ count+1 ì£¼ì†Œìˆœì„œì— ì¶”ê°€í•œë‹¤ -->
	<insert id="insertAddress" parameterType="UserInsertAddressDto">	
		insert into user_address values(#{detailAddress},#{postCode},#{userId},#{roadAddress},#{address},#{addressNickname},(select count(*) from user_address where user_id=#{userId})+1)
	</insert>
    
	 <!-----------------------------------------------ì£¼ì†Œ ì‚­ì œ mapper -------------------------------------------->
     <!-- ì£¼ì†Œì‚­ì œ 1ë‹¨ê³„ ì‘ì—…(ì£¼ì†Œì‚­ì œ)-->
	<delete id="deleteAddress1" parameterType="map">	
		delete from user_address where address_no=#{addressNo} and user_id=#{userId}
	</delete>

	<!-- ì£¼ì†Œì‚­ì œ 2ë‹¨ê³„ ì‘ì—…(ì‚­ì œëœ ì£¼ì†Œìˆœì„œë³´ë‹¤ ì‘ì€ ì£¼ì†Œë“¤ -1)  -->
	<update id="deleteAddress2" parameterType="map">	
		update user_address set Address_no=Address_no-1 where Address_no &gt; #{addressNo} and user_id=#{userId}
	</update>
</details>
<br>

### ê²°ì œ ì§„í–‰
<img src="https://github.com/bellho/gaji_market/assets/135290607/c80ada47-991e-438a-b36e-1956bda96da5">



<details>
  <summary>ì•ˆì „ê±°ë˜ ìœ íš¨ì„± ê²€ì‚¬ ì½”ë“œ(Click)</summary>

> 

  ì•ˆì „ê±°ë˜ì˜ í•µì‹¬ì€ `ìœ íš¨ì„± ê²€ì‚¬`ì…ë‹ˆë‹¤. JSPë¥¼ í†µí•´ ê²°ì œê°€ ì´ë£¨ì–´ì§€ê²Œ ë˜ë©´ <br> í´ë¼ì´ì–¸íŠ¸ëŠ” ê°œë°œì ë„êµ¬ë¥¼ í†µí•´ ìƒí’ˆê°€ê²©ê³¼ ê°™ì€ ê²°ì œì •ë³´ë¥¼ ë³€ì¡°í•˜ì—¬ ê²°ì œë¥¼ ì‹œë„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì´ë¥¼ ë°©ì§€í•˜ê³ ì JSPì—ì„œ ì•„ì„í¬íŠ¸ APIë¥¼ í†µí•´ ê²°ì œê°€ ì´ë£¨ì–´ì§€ë©´ <br>`Controller`ì—ì„œëŠ” `Database`ì— ì €ì¥ëœ ì •ë³´ì™€ `API`ì—ì„œ ê²°ì œëœ ì •ë³´ë¥¼ `ëŒ€ì¡°`í•©ë‹ˆë‹¤.<br>
  ì´ ê²°ê³¼ì— ë”°ë¼ `Database`ì— ì•ˆì „ê²°ì œì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì‚½ì…í•œ í›„ <br>
  ì‚½ì…ì´ ì„±ê³µí•˜ì˜€ë‹¤ë©´
  ìµœì¢…ì ìœ¼ë¡œ ì•ˆì „ê²°ì œ ì„±ê³µì—¬ë¶€ë¥¼ `í´ë¼ì´ì–¸íŠ¸`ì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.

  
>   

    @PostMapping("payment/callback")
	@ResponseBody
	public IamportResponse<Payment> callback(String impUid,InsertSafeTradingDto insertSafeTradingDto,Integer goodsId,HttpServletRequest request,Principal principal) {
		IamportResponse<Payment> result=null;
		String userId=principal.getName();
		try {
			result= api.paymentByImpUid(impUid);
			int amount =(int)Math.round(payServiceImpl.getAmount(goodsId) * 1.035);
			String goodTitle=result.getResponse().getName();
			if(result.getResponse().getStatus().equals("paid")&&amount==result.getResponse().getAmount().intValue()) {	// ê¸ˆì•¡ì´ ì¼ì¹˜í•˜ê³  ì§€ë¶ˆì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´.
				insertSafeTradingDto.setTransactionId(impUid);
				insertSafeTradingDto.setGoodsTitle(goodTitle);
				insertSafeTradingDto.setPrice(amount);
				insertSafeTradingDto.setPurchaseMethod(result.getResponse().getPayMethod());
				insertSafeTradingDto.setBuyerId(userId);
				
				int addResult = payServiceImpl.addSafeTrading(insertSafeTradingDto); 
                //ë°ì´í„°ë² ì´ìŠ¤ì— ì•ˆì „ê±°ë˜ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë„£ìŒ
				
				if(addResult==1) { // ê°€ì§€ ë°ì´í„°ë² ì´ìŠ¤ì— ê°’ì´ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ê°”ë‹¤ë©´
					Map<String, Object> map=new HashMap<String, Object>();
					map.put("status", 2);
					map.put("goodsId",goodsId);
					if(payServiceImpl.updateStatus(map)==1) {
						TitleBuyerDto titleBuyerDto=payServiceImpl.getIdFromTransactionId(impUid);
						insertNotificationDto.setBuyerId(titleBuyerDto.getBuyerId());  
						insertNotificationDto.setSellerId(titleBuyerDto.getSellerId()); 
						insertNotificationDto.setType(2);
						insertNotificationDto.setReferenceId(impUid);
						insertNotificationDto.setMessage(titleBuyerDto.getGoodsTitle()+"ì˜ ì•ˆì „ê±°ë˜ê°€ ì‹ ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.");
						payServiceImpl.insertNoti(insertNotificationDto);
						return result;	// ê±°ë˜ì •ë³´ ë°˜í™˜.
					}
				}
				else			// ê°€ì§€ ë°ì´í„°ë² ì´ìŠ¤ì— ê°’ì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ê±°ë˜ì¤‘ìœ¼ë¡œ ë³€ê²½ì´ ì•ˆë˜ì—ˆë‹¤ë©´ ê±°ë˜ì·¨ì†Œí•¨.
				{
					cancelData=new CancelData(impUid, true); 
					api.cancelPaymentByImpUid(cancelData);
					return result;	//ê±°ë˜ ì •ë³´ ë°˜í™˜
				}
			}
			
			else {
				cancelData=new CancelData(impUid, true); // imp_uidë¥¼ ì´ìš©í•˜ì—¬ ê±°ë˜ì·¨ì†Œí•¨ìˆ˜ì— ì¸ìê°€ë  ê°ì²´ìƒì„±
				api.cancelPaymentByImpUid(cancelData);	// apiì˜ ì·¨ì†Œí•¨ìˆ˜ì— cancelDataë¥¼ ì¸ìë¡œí•˜ì—¬ ê±°ë˜ì·¨ì†Œ.
				return result;	//ê±°ë˜ ì •ë³´ ë°˜í™˜
			}
		} catch (IamportResponseException | IOException e) {
			e.printStackTrace();
		}
		return result;
	}
</details>
<br>
    

### ë¦¬ë·° ì‘ì„±
<img src="https://github.com/bellho/gaji_market/assets/135290607/18f935e1-8afb-437f-920e-f9bf13cabfe8"><br>

<details>
  <summary>ë¦¬ë·°ì‘ì„± í”„ë¡œì‹œì € ì½”ë“œ(Click)</summary>
<br>


>   `í”„ë¡œì‹œì €`ë¥¼ í™œìš©í•˜ì—¬ `ë¦¬ë·°ì‘ì„±`ê³¼ `ìœ ì €í‰ì  ì—…ë°ì´íŠ¸`ë¥¼ `Transactional`í•˜ê²Œ ì²˜ë¦¬<br><br>
    ë¦¬ë·°ì‘ì„±ì´ ë°œìƒí•˜ì˜€ì„ ê²½ìš° ë¦¬ë·°ì ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•´ë‹¹ ìœ ì €ì˜ í‰ì ë„ í•­ìƒ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.<br>  ë–„ë¬¸ì— `transactional` ë˜ëŠ” `í”„ë¡œì‹œì €`ë¡œ ì²˜ë¦¬í•˜ëŠ”ê²ƒì´ ì ì ˆí•©ë‹ˆë‹¤. <br><br> í”„ë¡œì‹œì €ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ spring ì½”ë“œì˜ ë³µì¡ì„±ì„ ì¤„ì´ê³  í•œë²ˆì˜ ì…ë ¥ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—¬ëŸ¬ê°€ì§€ ì‹¤í–‰ì„ í•˜ë„ë¡ í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>

    CREATE OR REPLACE PROCEDURE updateRatingScore(
    goodsId IN NUMBER,
    userId IN VARCHAR,
    message IN VARCHAR,
    mannerPoint IN NUMBER,
    timePoint IN NUMBER,
    goodsPoint IN NUMBER,
    result1 OUT NUMBER
    ) AS 
    BEGIN
    BEGIN
        INSERT INTO deal_review VALUES (goodsId, userId, message, mannerPoint, timePoint, goodsPoint);
        result1 := 1; -- ì„±ê³µ
    EXCEPTION
        WHEN OTHERS THEN
            result1 := 0; -- ì‹¤íŒ¨
    END;
    -- rating_score ì—…ë°ì´íŠ¸
    IF result1 = 1 THEN
        BEGIN
            UPDATE users
            SET rating_score = rating_score + (mannerPoint + timePoint + goodsPoint - 11) / 5
            WHERE user_Id = (select user_Id from goods where goods_Id=goodsId);
            COMMIT;
        EXCEPTION
            WHEN OTHERS THEN
                result1 := 0; -- ì‹¤íŒ¨
                ROLLBACK;
        END;
    END IF;
    END;
</details>
<br>

#
## ì•Œë¦¼ ê¸°ëŠ¥
#### í™”ë©´êµ¬í˜„ - `ì‹ ì •í›ˆ` ê¸°ëŠ¥êµ¬í˜„- `ì‹ ì •í›ˆ`  
<img src="https://github.com/bellho/gaji_market/assets/135290607/46a3b6f9-e128-4688-ba41-339a0b39457c">
<details>
  <summary>ì•Œë¦¼ ê¸°ëŠ¥ ì„¤ëª…(Click)</summary>
	ì•ˆì „ê²°ì œ ì‹ ì²­, ìˆ˜ë½, ì·¨ì†Œ, ìš´ì†¡ì¥ ë“±ë¡, ê²°ì œí™•ì • ë“±ì— ëŒ€í•´ì„œ ì•Œë¦¼ì´ ìƒì„±ë˜ë©° <br>
	ajaxë¥¼ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ ì•Œë¦¼ê°¯ìˆ˜ë¥¼ ë¶ˆëŸ¬ì™€ ìµœì‹ í™” í•©ë‹ˆë‹¤.<br>
	ì•Œë¦¼ ì„ íƒì‹œ í•´ë‹¹í•˜ëŠ” ì•ˆì „ê±°ë˜ ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™í•˜ë©°<br>
	ê°œë³„ì‚­ì œ ë° ì„ íƒì•Œë¦¼ ì¼ê´„ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br><br>
	
</details>
<br>

#
## ğŸ§‘â€ğŸ¤â€ğŸ§‘ í”„ë¡œì íŠ¸ ê¸°ëŠ¥êµ¬í˜„
|ë‹´ë‹¹ì|ë‚´ìš©|
|------|----|
|**íŒ€ì¥ ê¹€ì¢…í˜¸**|Spring Framework ì´ˆê¸° ì…‹íŒ…<br>Spring Sercurity ì ìš© <br> URL Mapping<br>ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ ì´ˆì•ˆ ì‘ì„± <br>ì±„íŒ… í™”ë©´/ê¸°ëŠ¥ êµ¬í˜„|
|íŒ€ì› ì²œì˜ì¤€|ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±<br>Controller Mappingì‘ì—…<br>íšŒì›ê°€ì…(ì´ë©”ì¼ì¸ì¦SMPT, ì£¼ì†Œì¶”ê°€)<br>ì•„ì´ë””ì°¾ê¸°<br>ë¹„ë°€ë²ˆí˜¸ì°¾ê¸°(ì´ë©”ì¼ì¸ì¦SMPT)<br>ë§ˆì´í˜ì´ì§€(íšŒì›ì •ë³´ë³€ê²½)<br>ê´€ë¦¬ìí˜ì´ì§€(ê°€ì…ìœ ì €ì¡°íšŒ, ì •ì§€ëœ ìœ ì € ë¦¬ìŠ¤íŠ¸, ì‹ ê³ ëœ ìœ ì €ê°€ ì‹ ê³ ë¦¬ìŠ¤íŠ¸, ì‹ ê³ ìƒì„¸í˜ì´ì§€, ì •ì§€, ì •ì§€í•´ì œ, ê²€í† )<br>ê²Œì‹œê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ(cloudinaryíŒŒì¼ì—…ë¡œë“œ ì¶”ê°€ ë° ì‚­ì œ, ckeditor5 ckfinder ë‚´ìš© ì´ë¯¸ì§€ì—…ë¡œë“œ, <br>kakoMap ì•½ì†ìœ„ì¹˜ì§€ì •, ipstack ì‚¬ìš©ì ê¸°ë³¸ ìœ„ì¹˜ ì§€ì •)<br>ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°(kakoMap ì•½ì†ì¥ì†Œë§µë°ë§í¬)<br>íšŒì› ëª¨ì•„ë³´ê¸° ì¶”ê°€, ëª¨ì•„ë³´ê¸° í•´ì œí•˜ê¸°<br>ìƒí’ˆ ì°œ, ì°œ í•´ì œ<br>|
|íŒ€ì› ì‹ ì •í›ˆ||
|íŒ€ì› ë°±ì˜í—Œ|ERD ë‹¤ì´ì–´ê·¸ë¨ ì´ˆì•ˆ ì‘ì„±<br>mapper, Service, Dao ì´ˆì•ˆ ì‘ì„±<br> API ì•„ì„í¬íŠ¸ ì•ˆì „ê²°ì œ(ê²°ì œ, ê²°ì œì·¨ì†Œ, ê²°ì œìˆ˜ë½, ê²°ì œí™•ì •)<br>ê±°ë˜ìƒíƒœ ë³€ê²½ì— ë”°ë¥¸ ìƒí’ˆìƒíƒœ ë³€ê²½<br>ì•ˆì „ê±°ë˜ ì•Œë¦¼ ìƒì„±, ì‚­ì œ, ì¡°íšŒ<br>ìƒí’ˆ ì‹ ê³ <br>ì£¼ì†Œ(ì¶”ê°€, ë³€ê²½, ì‚­ì œ)<br>ë¦¬ë·° ë° ìœ ì €í‰ì  ì—…ë°ì´íŠ¸ ê¸°ëŠ¥(í”„ë¡œì‹œì € ì‚¬ìš©)<br>íŒë§¤ë‚´ì—­ ì¡°íšŒ<br>êµ¬ë§¤ë‚´ì—­ ì¡°íšŒ<br>íŠ¹ì • ìœ ì € ìƒí’ˆ ì¡°íšŒ<br>ëª¨ì•„ë³´ê¸° í˜ì´ì§€<br>ì°œ í˜ì´ì§€<br>í˜ì´ì§• ì²˜ë¦¬<br>ë…¸ì…˜ ì„¸íŒ… ë° íšŒì˜ë¡ ì‘ì„±<br>|
#
## ğŸ“Œ ì£¼ìš”ê¸°ëŠ¥
- ì—¬ëŸ¬ê°€ì§€ ê²€ìƒ‰ ì¡°ê±´ ë° í˜ì´ì§•ì„ ì ìš©í•œ ìƒí’ˆë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
- ì±„íŒ…ì„ í†µí•œ ì§ê±°ë˜
- ì•ˆì „ê±°ë˜
- ì‚¬ì§„ì—…ë¡œë“œ ë° í…ìŠ¤íŠ¸ ì„¤ì • ê°€ëŠ¥í•œ ê¸€ ì‘ì„±
#
